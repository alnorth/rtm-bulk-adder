<!DOCTYPE html>
<html lang="en">
  <head>
    <title>RTM Bulk Add</title>
    <meta name="description" content="Store lists of tasks and add them in bulk to Remember the Milk with one click.">
    <meta name="viewport" content="width=device-width, height=device-height, user-scalable=no">
    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap-responsive.min.css">
    <link rel="stylesheet" type="text/css" href="css/bulk-add.css">
  </head>
  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container"><a href="#" class="brand">RTM Bulk Add</a>
          <ul data-bind="visible: auth.loggedIn()" class="nav pull-right">
            <p data-bind="text: auth.username()" class="nav navbar-text"></p>
            <li><a data-bind="click: auth.logOut">Sign Out</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div data-bind="visible: loading()" class="loading">Loading ...</div>
    <div data-bind="css: { visible: !loading() }" class="main loaded">
      <div class="container">
        <div class="row">
          <div class="span12">
            <p>You can build up task sets by putting a task on each line. Use <a href="https://www.rememberthemilk.com/services/smartadd/">smart add</a> syntax to set due dates, lists, tags, etc.</p>
          </div>
        </div>
        <div data-bind="foreach: lists" class="row">
          <div class="span6">
            <div class="list-box well">
              <div class="rtm-lists"><span>List: </span>
                <select data-bind="value: rtmList, options: $root.rtmLists, optionsText: 'name'" class="input-medium"></select>
              </div>
              <h4 data-bind="text: 'Task Set ' + ($index() + 1)" class="title"></h4>
              <textarea data-bind="value: text" class="list"></textarea>
              <div>
                <div data-bind="click: send, css: { disabled: sending }" class="btn"><i class="icon-upload"></i> Send to RTM</div>
                <div data-bind="click: $root.remove" class="btn btn-danger"><i class="icon-remove icon-white"></i> Delete</div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="span12">
            <div data-bind="click: addList" class="btn btn-primary"><i class="icon-plus icon-white"></i> Add list</div>
          </div>
        </div>
        <footer>
          <div class="footer-right">This product uses the Remember The Milk API but is not endorsed or certified by Remember The Milk.</div>
          <div class="footer-left">by <a href="http://www.twitter.com/al_north">@al_north</a> | <a href="http://www.alnorth.com">blog</a> | <a href="https://github.com/alnorth29/rtm-bulk-adder/issues">bugs &amp; feature requests</a></div>
        </footer>
      </div>
    </div>
    <div data-bind="showModal: fatalError() || (!auth.loggedIn() &amp;&amp; !loading())" class="modal fade hide">
      <div class="modal-header">
        <h3>Remember the Milk</h3>
      </div>
      <div class="modal-body">
        <div data-bind="visible: fatalError()"><span>Error encountered: </span><span data-bind="text: fatalError()"></span></div>
        <div data-bind="visible: !fatalError() &amp;&amp; auth.tokenExpired()">Your connection to Remember the Milk has expired. Please log in again.</div>
        <div data-bind="visible: !fatalError() &amp;&amp; !auth.tokenExpired()">In order to use this page properly you must authorise it to access your Remember the Milk account.</div>
      </div>
      <div data-bind="visible: !fatalError()" class="modal-footer"><a href="#" data-bind="click: auth.redirectToRTM" class="btn btn-primary">Log in to Remember the Milk</a></div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script src="js/knockout-2.2.1.js"></script>
    <script src="js/md5-min.js"></script>
    <script src="keys.js"></script>
    <script src="js/bulk-add.js"></script>
    <script type="text/javascript">
      if(googleAnalyticsAccount) {
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', googleAnalyticsAccount]);
        _gaq.push(['_trackPageview']);
        
        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
      }
    </script>
  </body>
</html>